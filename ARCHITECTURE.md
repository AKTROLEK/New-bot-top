# ğŸ—ï¸ System Architecture | Ø¨Ù†ÙŠØ© Ø§Ù„Ù†Ø¸Ø§Ù…

<div dir="rtl">

## Ù†Ø¸Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø¨Ù†ÙŠØ© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…

</div>

## ğŸ“Š System Overview | Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Advanced Discord Bot System               â”‚
â”‚                     (100% Arabic Interface)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ Discord â”‚          â”‚   Web   â”‚          â”‚Database â”‚
   â”‚   Bot   â”‚          â”‚Dashboardâ”‚          â”‚ SQLite  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Project Structure | Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```
New-bot-top/
â”‚
â”œâ”€â”€ ğŸ“„ Configuration Files
â”‚   â”œâ”€â”€ package.json          # Project dependencies
â”‚   â”œâ”€â”€ .env.example          # Environment template
â”‚   â”œâ”€â”€ .gitignore            # Git ignore rules
â”‚   â””â”€â”€ LICENSE               # MIT License
â”‚
â”œâ”€â”€ ğŸ“š Documentation
â”‚   â”œâ”€â”€ README.md             # Project overview
â”‚   â”œâ”€â”€ INSTALLATION.md       # Setup guide
â”‚   â”œâ”€â”€ CONTRIBUTING.md       # Contribution guide
â”‚   â”œâ”€â”€ FEATURES.md           # Feature list
â”‚   â””â”€â”€ ARCHITECTURE.md       # This file
â”‚
â”œâ”€â”€ ğŸ“ data/                  # Database files
â”‚   â””â”€â”€ bot.db                # SQLite database
â”‚
â”œâ”€â”€ ğŸ“ logs/                  # Log files
â”‚   â”œâ”€â”€ bot.log               # Main log
â”‚   â””â”€â”€ bot-error.log         # Error log
â”‚
â””â”€â”€ ğŸ“ src/                   # Source code
    â”‚
    â”œâ”€â”€ ğŸ“„ index.js           # Bot entry point
    â”œâ”€â”€ ğŸ“„ config.js          # Configuration
    â”‚
    â”œâ”€â”€ ğŸ“ commands/          # Slash commands (organized by category)
    â”‚   â”œâ”€â”€ admin/            # Admin commands
    â”‚   â”‚   â”œâ”€â”€ ban.js        # /Ù…Ù†Ø¹
    â”‚   â”‚   â”œâ”€â”€ kick.js       # /Ø·Ø±Ø¯
    â”‚   â”‚   â”œâ”€â”€ dashboard.js  # /Ù„ÙˆØ­ØªÙŠ
    â”‚   â”‚   â””â”€â”€ system.js     # /Ø§Ù„Ù†Ø¸Ø§Ù…
    â”‚   â”‚
    â”‚   â”œâ”€â”€ support/          # Support commands
    â”‚   â”‚   â””â”€â”€ open-support.js  # /ÙØªØ­-Ø¯Ø¹Ù…
    â”‚   â”‚
    â”‚   â”œâ”€â”€ verification/     # Verification commands
    â”‚   â”‚   â””â”€â”€ start-verification.js  # /Ø¨Ø¯Ø¡-Ø§Ù„ØªÙØ¹ÙŠÙ„
    â”‚   â”‚
    â”‚   â”œâ”€â”€ streamer/         # Streamer commands
    â”‚   â”‚   â”œâ”€â”€ profile.js    # /Ø¨Ø±ÙˆÙØ§ÙŠÙ„
    â”‚   â”‚   â””â”€â”€ missions.js   # /Ù…Ù‡Ø§Ù…ÙŠ
    â”‚   â”‚
    â”‚   â”œâ”€â”€ wallet/           # Wallet commands
    â”‚   â”‚   â”œâ”€â”€ add-credit.js # /Ø¥Ø¶Ø§ÙØ©-ÙƒØ±ÙŠØ¯Øª
    â”‚   â”‚   â””â”€â”€ balance.js    # /Ø±ØµÙŠØ¯ÙŠ
    â”‚   â”‚
    â”‚   â”œâ”€â”€ security/         # Security commands
    â”‚   â”‚   â””â”€â”€ emergency-mode.js  # /ÙˆØ¶Ø¹-Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
    â”‚   â”‚
    â”‚   â””â”€â”€ ai/               # AI commands
    â”‚       â”œâ”€â”€ title.js      # /Ø¹Ù†ÙˆØ§Ù†
    â”‚       â””â”€â”€ analyze.js    # /ØªØ­Ù„ÙŠÙ„
    â”‚
    â”œâ”€â”€ ğŸ“ events/            # Discord event handlers
    â”‚   â”œâ”€â”€ ready.js          # Bot ready event
    â”‚   â”œâ”€â”€ interactionCreate.js  # Command interactions
    â”‚   â””â”€â”€ messageCreate.js  # Message events
    â”‚
    â”œâ”€â”€ ğŸ“ handlers/          # Interactive component handlers
    â”‚   â”œâ”€â”€ buttons/          # Button handlers
    â”‚   â”‚   â”œâ”€â”€ verify_pass.js
    â”‚   â”‚   â””â”€â”€ verify_fail.js
    â”‚   â”‚
    â”‚   â”œâ”€â”€ modals/           # Modal handlers
    â”‚   â”‚   â””â”€â”€ verify_fail_modal.js
    â”‚   â”‚
    â”‚   â””â”€â”€ selectMenus/      # Select menu handlers
    â”‚
    â”œâ”€â”€ ğŸ“ services/          # Business logic services
    â”‚   â”œâ”€â”€ supportService.js    # Support system logic
    â”‚   â””â”€â”€ streamerService.js   # Streamer system logic
    â”‚
    â”œâ”€â”€ ğŸ“ models/            # Database models
    â”‚   â””â”€â”€ database.js       # Database connection & schema
    â”‚
    â”œâ”€â”€ ğŸ“ utils/             # Utility functions
    â”‚   â”œâ”€â”€ logger.js         # Winston logger
    â”‚   â””â”€â”€ i18n.js           # Internationalization
    â”‚
    â”œâ”€â”€ ğŸ“ locales/           # Language files
    â”‚   â”œâ”€â”€ ar.json           # Arabic translations (PRIMARY)
    â”‚   â””â”€â”€ en.json           # English (backend only)
    â”‚
    â””â”€â”€ ğŸ“ web/               # Web dashboard
        â”œâ”€â”€ server.js         # Express server
        â”‚
        â”œâ”€â”€ public/           # Static files
        â”‚   â”œâ”€â”€ css/
        â”‚   â”‚   â”œâ”€â”€ main.css
        â”‚   â”‚   â””â”€â”€ dashboard.css
        â”‚   â”‚
        â”‚   â””â”€â”€ js/
        â”‚       â”œâ”€â”€ main.js
        â”‚       â””â”€â”€ dashboard.js
        â”‚
        â”œâ”€â”€ views/            # EJS templates
        â”‚   â”œâ”€â”€ index.ejs     # Landing page
        â”‚   â”‚
        â”‚   â”œâ”€â”€ partials/     # Reusable components
        â”‚   â”‚   â”œâ”€â”€ dashboard-sidebar.ejs
        â”‚   â”‚   â””â”€â”€ dashboard-header.ejs
        â”‚   â”‚
        â”‚   â””â”€â”€ dashboard/    # Dashboard pages
        â”‚       â”œâ”€â”€ index.ejs
        â”‚       â”œâ”€â”€ support.ejs
        â”‚       â”œâ”€â”€ verification.ejs
        â”‚       â”œâ”€â”€ streamers.ejs
        â”‚       â”œâ”€â”€ analytics.ejs
        â”‚       â”œâ”€â”€ security.ejs
        â”‚       â””â”€â”€ settings.ejs
        â”‚
        â””â”€â”€ routes/           # Route handlers (future)
```

---

## ğŸ”„ Data Flow | ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### 1. Command Execution Flow

```
User Types Command in Discord
         â”‚
         â–¼
Discord API receives command
         â”‚
         â–¼
Bot receives interactionCreate event
         â”‚
         â–¼
Event handler (interactionCreate.js)
         â”‚
         â–¼
Command handler looks up command
         â”‚
         â–¼
Execute command file (e.g., profile.js)
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚             â”‚             â”‚
         â–¼             â–¼             â–¼
   Access i18n   Query Database  Call Service
         â”‚             â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
            Build response embed
                       â”‚
                       â–¼
           Send reply to Discord
                       â”‚
                       â–¼
                 User sees result
```

### 2. Button Interaction Flow

```
User clicks button (e.g., "Ø§Ø¬ØªØ§Ø²")
         â”‚
         â–¼
Discord sends interaction
         â”‚
         â–¼
Bot receives interactionCreate event
         â”‚
         â–¼
Event handler detects button
         â”‚
         â–¼
Parse customId (e.g., "verify_pass:userId")
         â”‚
         â–¼
Import handler (handlers/buttons/verify_pass.js)
         â”‚
         â–¼
Handler executes logic
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚
         â–¼              â–¼
   Update Database  Send DM to user
         â”‚              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
      Update original message
                â”‚
                â–¼
           User sees result
```

### 3. Web Dashboard Flow

```
User visits website
         â”‚
         â–¼
Click "Ø¯Ø®ÙˆÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"
         â”‚
         â–¼
Redirect to Discord OAuth
         â”‚
         â–¼
User authorizes bot
         â”‚
         â–¼
Discord redirects to /auth/callback
         â”‚
         â–¼
Create session
         â”‚
         â–¼
Redirect to /dashboard
         â”‚
         â–¼
Check authentication (checkAuth middleware)
         â”‚
         â–¼
Apply rate limiting
         â”‚
         â–¼
Query database for stats
         â”‚
         â–¼
Render dashboard page
         â”‚
         â–¼
User sees dashboard
```

---

## ğŸ—„ï¸ Database Schema | Ù…Ø®Ø·Ø· Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ support_cases   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ case_id         â”‚
â”‚ user_id         â”‚
â”‚ staff_id        â”‚
â”‚ channel_id      â”‚
â”‚ status          â”‚
â”‚ category        â”‚
â”‚ priority        â”‚
â”‚ created_at      â”‚
â”‚ closed_at       â”‚
â”‚ rating          â”‚
â”‚ rating_comment  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ support_queue   â”‚     â”‚ staff_status    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚     â”‚ user_id (PK)    â”‚
â”‚ user_id         â”‚     â”‚ status          â”‚
â”‚ waiting_room_id â”‚     â”‚ current_cases   â”‚
â”‚ joined_at       â”‚     â”‚ total_cases     â”‚
â”‚ position        â”‚     â”‚ last_active     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚verification_queueâ”‚    â”‚verification_testsâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚    â”‚ id (PK)          â”‚
â”‚ user_id          â”‚    â”‚ user_id          â”‚
â”‚ waiting_room_id  â”‚    â”‚ staff_id         â”‚
â”‚ joined_at        â”‚    â”‚ score            â”‚
â”‚ status           â”‚    â”‚ passed           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ answers          â”‚
                        â”‚ created_at       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ streamers       â”‚     â”‚ streamer_content â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id (PK)    â”‚     â”‚ id (PK)          â”‚
â”‚ platform        â”‚â”€â”€â”€â”€â–¶â”‚ streamer_id (FK) â”‚
â”‚ channel_url     â”‚     â”‚ content_type     â”‚
â”‚ status          â”‚     â”‚ url              â”‚
â”‚ approved_at     â”‚     â”‚ duration         â”‚
â”‚ total_videos    â”‚     â”‚ views            â”‚
â”‚ total_hours     â”‚     â”‚ created_at       â”‚
â”‚ performance_... â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ created_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ wallets         â”‚     â”‚ transactions     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id (PK)    â”‚     â”‚ id (PK)          â”‚
â”‚ balance         â”‚â”€â”€â”€â”€â–¶â”‚ user_id (FK)     â”‚
â”‚ total_earned    â”‚     â”‚ type             â”‚
â”‚ total_spent     â”‚     â”‚ amount           â”‚
â”‚ savings_mode    â”‚     â”‚ description      â”‚
â”‚ created_at      â”‚     â”‚ created_at       â”‚
â”‚ updated_at      â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ staff_analytics  â”‚    â”‚ security_logs   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚    â”‚ id (PK)         â”‚
â”‚ user_id          â”‚    â”‚ user_id         â”‚
â”‚ date             â”‚    â”‚ action          â”‚
â”‚ cases_handled    â”‚    â”‚ reason          â”‚
â”‚ avg_response_... â”‚    â”‚ moderator_id    â”‚
â”‚ voice_time       â”‚    â”‚ created_at      â”‚
â”‚ afk_time         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ performance_...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user_xp         â”‚     â”‚ user_reputation  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id (PK)    â”‚     â”‚ user_id (PK)     â”‚
â”‚ xp              â”‚     â”‚ reputation       â”‚
â”‚ level           â”‚     â”‚ given_count      â”‚
â”‚ messages        â”‚     â”‚ received_count   â”‚
â”‚ last_xp_gain    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Architecture | Ø¨Ù†ÙŠØ© Ø§Ù„Ø£Ù…Ø§Ù†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Security Layer Stack            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Application     â”‚
    â”‚   Rate Limiting   â”‚ â† 100 req/15min
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Authentication  â”‚
    â”‚   & Authorization â”‚ â† Discord OAuth
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Input Validation â”‚ â† All user inputs
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Anti-Spam       â”‚ â† Message tracking
    â”‚   Anti-Link       â”‚
    â”‚   Anti-Mention    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Database        â”‚ â† Parameterized queries
    â”‚   Protection      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Session         â”‚ â† Secure cookies
    â”‚   Security        â”‚   httpOnly, sameSite
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Error Handling  â”‚ â† Winston logging
    â”‚   & Logging       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Emergency Mode  â”‚ â† Last resort
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ Web Architecture | Ø¨Ù†ÙŠØ© Ø§Ù„ÙˆÙŠØ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend (Client)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   HTML     â”‚  â”‚      JavaScript      â”‚  â”‚
â”‚  â”‚   (EJS)    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚            â”‚  â”‚  â”‚ Event Handlers â”‚  â”‚  â”‚
â”‚  â”‚ - index    â”‚  â”‚  â”‚ API Calls      â”‚  â”‚  â”‚
â”‚  â”‚ - dashboardâ”‚  â”‚  â”‚ Animations     â”‚  â”‚  â”‚
â”‚  â”‚ - support  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚ - etc.     â”‚  â”‚                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                    â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Backend (Server)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        Express.js Server               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Middleware   â”‚  â”‚  Routes        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - Rate Limit â”‚  â”‚  - /           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - Session    â”‚  â”‚  - /auth/*     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - Static     â”‚  â”‚  - /dashboard/*â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - Body Parse â”‚  â”‚  - /api/*      â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚              â”‚                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚    â”‚  Passport.js   â”‚  â”‚ Database â”‚        â”‚
â”‚    â”‚  (OAuth)       â”‚  â”‚ (SQLite) â”‚        â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤– Bot Architecture | Ø¨Ù†ÙŠØ© Ø§Ù„Ø¨ÙˆØª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Discord.js Client                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚  Events   â”‚ â”‚Commands â”‚ â”‚ Handlers  â”‚
â”‚           â”‚ â”‚         â”‚ â”‚           â”‚
â”‚ - ready   â”‚ â”‚ - admin â”‚ â”‚ - buttons â”‚
â”‚ - interactâ”‚ â”‚ - supportâ”‚ â”‚ - modals  â”‚
â”‚ - message â”‚ â”‚ - streamâ”‚ â”‚ - select  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚            â”‚            â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  Services  â”‚          â”‚  Utilities  â”‚
â”‚            â”‚          â”‚             â”‚
â”‚ - support  â”‚          â”‚ - i18n      â”‚
â”‚ - streamer â”‚          â”‚ - logger    â”‚
â”‚ - wallet   â”‚          â”‚ - config    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚                        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚    Database    â”‚
          â”‚    (SQLite)    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¡ API & Integration Points | Ù†Ù‚Ø§Ø· Ø§Ù„ØªÙƒØ§Ù…Ù„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         External Services              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚         â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚Discordâ”‚ â”‚OAuthâ”‚ â”‚OpenAI   â”‚
â”‚  API  â”‚ â”‚ 2.0 â”‚ â”‚(Optional)â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚        â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Bot System    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Internal Servicesâ”‚
    â”‚                 â”‚
    â”‚ - supportServiceâ”‚
    â”‚ - streamerSvc  â”‚
    â”‚ - walletSvc    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    Database     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Development Workflow | Ø³ÙŠØ± Ø¹Ù…Ù„ Ø§Ù„ØªØ·ÙˆÙŠØ±

```
Developer
    â”‚
    â–¼
Create Feature Branch
    â”‚
    â–¼
Write Code
    â”‚
    â”œâ”€â”€ Add Command (src/commands/)
    â”œâ”€â”€ Add Event Handler (src/events/)
    â”œâ”€â”€ Add Service Logic (src/services/)
    â””â”€â”€ Update i18n (src/locales/ar.json)
    â”‚
    â–¼
Test Locally
    â”‚
    â”œâ”€â”€ npm start
    â”œâ”€â”€ npm run web
    â””â”€â”€ Test in Discord
    â”‚
    â–¼
Commit & Push
    â”‚
    â–¼
Create Pull Request
    â”‚
    â–¼
Code Review
    â”‚
    â–¼
Merge to Main
    â”‚
    â–¼
Deploy to Production
```

---

## ğŸš€ Deployment Architecture | Ø¨Ù†ÙŠØ© Ø§Ù„Ù†Ø´Ø±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Production Server             â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Process Manager           â”‚ â”‚
â”‚  â”‚            (PM2)                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Discord Bot â”‚ â”‚  Dashboard  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Process   â”‚ â”‚   Process   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  (Port N/A) â”‚ â”‚ (Port 3000) â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Reverse Proxy             â”‚ â”‚
â”‚  â”‚        (Nginx/Apache)             â”‚ â”‚
â”‚  â”‚          Port 80/443              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Database                  â”‚ â”‚
â”‚  â”‚         (SQLite)                  â”‚ â”‚
â”‚  â”‚      /var/data/bot.db             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚          Logs                     â”‚ â”‚
â”‚  â”‚      /var/logs/bot.log            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Considerations | Ø§Ø¹ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡

### Optimization Points
1. **Database**
   - WAL mode enabled
   - Indexed columns
   - Prepared statements
   - Connection pooling ready

2. **Web Server**
   - Rate limiting
   - Session management
   - Static file caching
   - Gzip compression ready

3. **Bot**
   - Event-driven architecture
   - Async/await patterns
   - Error recovery
   - Graceful shutdown

4. **Memory**
   - Efficient data structures
   - Limited cache size
   - Garbage collection friendly
   - Resource cleanup

---

<div dir="rtl">

## ğŸ¯ Ø§Ù„Ø®Ù„Ø§ØµØ©

Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…ØµÙ…Ù… Ø¨Ø¹Ù†Ø§ÙŠØ© Ù„ÙŠÙƒÙˆÙ†:
- **Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ·ÙˆÙŠØ±** - Ø³Ù‡Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ù„ØªÙˆØ³Ø¹
- **Ø¢Ù…Ù†** - Ø·Ø¨Ù‚Ø§Øª Ø­Ù…Ø§ÙŠØ© Ù…ØªØ¹Ø¯Ø¯Ø©
- **ÙØ¹Ù‘Ø§Ù„** - Ø£Ø¯Ø§Ø¡ Ù…Ø­Ø³Ù‘Ù†
- **Ù…ÙˆØ«Ù‚** - ØªÙˆØ«ÙŠÙ‚ Ø´Ø§Ù…Ù„
- **Ø§Ø­ØªØ±Ø§ÙÙŠ** - Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ù†ØªØ§Ø¬

</div>

Made with â¤ï¸ for Arabic Discord Communities
